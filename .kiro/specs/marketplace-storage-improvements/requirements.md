# Requirements Document

## Introduction

Данная спецификация описывает улучшения системы хранилища и торговой площадки для игры с карточками киберспортсменов. Основные изменения включают: разделение карточек в хранилище (как в коллекции), изменение логики обработки дубликатов карточек из паков, удаление возможности перемещения карточек из хранилища в коллекцию, и улучшение интерфейса взаимодействия с карточками в коллекции.

## Glossary

- **Storage System** (Система Хранилища): компонент приложения, который хранит дубликаты карточек игрока
- **Collection System** (Система Коллекции): компонент приложения, который хранит уникальные карточки игрока
- **Pack Opening System** (Система Открытия Паков): компонент, который обрабатывает открытие паков и распределение карточек
- **Marketplace System** (Система Торговой Площадки): компонент, который позволяет игрокам торговать карточками
- **Card Modal** (Модальное Окно Карточки): интерфейс, который отображается при клике на карточку
- **Quick Sell** (Быстрая Продажа): действие мгновенной продажи карточки системе за фиксированную цену
- **Duplicate Card** (Дубликат Карточки): карточка, которая уже существует в коллекции игрока

## Requirements

### Requirement 1: Визуальное Разделение Карточек в Хранилище

**User Story:** Как игрок, я хочу видеть карточки в хранилище разделенными (не стопкой), чтобы легко различать каждую карточку индивидуально

#### Acceptance Criteria

1. WHEN игрок открывает вкладку хранилища, THE Storage System SHALL отображать каждую карточку отдельно в сетке
2. THE Storage System SHALL отображать карточки в том же формате, что и в коллекции (без группировки дубликатов)
3. WHEN в хранилище находятся несколько копий одной карточки, THE Storage System SHALL отображать каждую копию как отдельный элемент в сетке

### Requirement 2: Обработка Дубликатов из Паков

**User Story:** Как игрок, я хочу иметь специальные опции для дубликатов карточек из паков, чтобы эффективно управлять своей коллекцией

#### Acceptance Criteria

1. WHEN игрок открывает карточку из пака, THE Pack Opening System SHALL проверять наличие этой карточки в коллекции
2. IF карточка уже существует в коллекции, THEN THE Pack Opening System SHALL отображать только три опции: "Быстрая продажа", "Выставить на торговую площадку", "В хранилище"
3. IF карточка не существует в коллекции, THEN THE Pack Opening System SHALL отображать опции: "В коллекцию", "Быстрая продажа", "Выставить на торговую площадку", "В хранилище"
4. THE Pack Opening System SHALL НЕ отображать опцию "В коллекцию" для карточек, которые уже находятся в коллекции

### Requirement 3: Удаление Перемещения из Хранилища в Коллекцию

**User Story:** Как игрок, я не хочу иметь возможность перемещать карточки из хранилища в коллекцию, потому что коллекция должна содержать только уникальные карточки

#### Acceptance Criteria

1. THE Storage System SHALL НЕ отображать кнопку "В коллекцию" в интерфейсе хранилища
2. THE Storage System SHALL удалить функциональность перемещения карточек из хранилища в коллекцию
3. WHEN игрок выбирает карточки в хранилище, THE Storage System SHALL отображать только опции: "Быстрая продажа" и "Выставить на торговую площадку"

### Requirement 4: Торговая Площадка - Выставление Карточек

**User Story:** Как игрок, я хочу выставлять свои карточки на торговую площадку из хранилища и коллекции, чтобы продавать их другим игрокам

#### Acceptance Criteria

1. WHEN игрок выбирает карточку в хранилище или коллекции, THE Marketplace System SHALL позволять выставить карточку на продажу
2. WHEN игрок выставляет карточку на продажу, THE Marketplace System SHALL запрашивать цену в коинах (минимум 1 коин)
3. WHEN карточка выставлена на продажу, THE Marketplace System SHALL удалять карточку из хранилища или коллекции игрока
4. THE Marketplace System SHALL создавать объявление с указанной ценой и информацией о продавце

### Requirement 5: Торговая Площадка - Покупка Карточек

**User Story:** Как игрок, я хочу покупать карточки на торговой площадке, чтобы пополнять свою коллекцию

#### Acceptance Criteria

1. WHEN игрок просматривает торговую площадку, THE Marketplace System SHALL отображать все активные объявления
2. WHEN игрок покупает карточку, THE Marketplace System SHALL проверять достаточность коинов
3. IF у игрока достаточно коинов, THEN THE Marketplace System SHALL переводить коины продавцу и добавлять карточку покупателю
4. WHEN купленная карточка уже существует в коллекции покупателя, THE Marketplace System SHALL добавлять карточку в хранилище
5. WHEN купленная карточка не существует в коллекции покупателя, THE Marketplace System SHALL добавлять карточку в коллекцию
6. THE Marketplace System SHALL обновлять статус объявления на "продано" после успешной покупки

### Requirement 6: Торговая Площадка - Отмена Объявлений

**User Story:** Как игрок, я хочу отменять свои объявления на торговой площадке, чтобы вернуть карточки обратно

#### Acceptance Criteria

1. WHEN игрок просматривает свои объявления, THE Marketplace System SHALL отображать кнопку "Отменить" для активных объявлений
2. WHEN игрок отменяет объявление, THE Marketplace System SHALL возвращать карточку в хранилище игрока
3. THE Marketplace System SHALL обновлять статус объявления на "отменено"
4. THE Marketplace System SHALL позволять отменять только активные объявления

### Requirement 7: Модальное Окно Карточки в Коллекции

**User Story:** Как игрок, я хочу видеть детальную информацию о карточке при клике в коллекции, чтобы принимать решения о продаже

#### Acceptance Criteria

1. WHEN игрок кликает на карточку в коллекции, THE Collection System SHALL отображать модальное окно с статистикой карточки
2. THE Card Modal SHALL отображать всю существующую статистику карточки (имя, рейтинг, команда, и т.д.)
3. THE Card Modal SHALL отображать внизу две кнопки: "Быстрая продажа" и "Выставить на торговую площадку"
4. WHEN игрок выбирает "Быстрая продажа", THE Collection System SHALL продавать карточку за фиксированную цену
5. WHEN игрок выбирает "Выставить на торговую площадку", THE Collection System SHALL открывать форму для указания цены
6. THE Card Modal SHALL НЕ отображать опцию перемещения в хранилище из коллекции

### Requirement 8: Модальное Окно Карточки в Хранилище

**User Story:** Как игрок, я хочу иметь быстрый доступ к действиям с карточками в хранилище, чтобы эффективно управлять дубликатами

#### Acceptance Criteria

1. WHEN игрок кликает на карточку в хранилище, THE Storage System SHALL отображать модальное окно с опциями
2. THE Card Modal SHALL отображать две кнопки: "Быстрая продажа" и "Выставить на торговую площадку"
3. THE Card Modal SHALL НЕ отображать статистику карточки (в отличие от коллекции)
4. THE Card Modal SHALL НЕ отображать опцию перемещения в коллекцию

### Requirement 9: Торговая Площадка как Отдельная Страница

**User Story:** Как игрок, я хочу иметь доступ к торговой площадке через главную навигацию, чтобы быстро находить и покупать карточки

#### Acceptance Criteria

1. THE Marketplace System SHALL быть доступна как отдельная страница в приложении
2. THE Navigation System SHALL отображать ссылку "Торговая площадка" в главной навигации после ссылки "Магазин"
3. WHEN игрок переходит на страницу торговой площадки, THE Marketplace System SHALL отображать все активные объявления
4. THE Marketplace System SHALL позволять фильтровать объявления по сезону, редкости и другим параметрам
5. THE Marketplace System SHALL отображать карточки продавцов с ценой и информацией о продавце
